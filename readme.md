// Структура проекта
// /
// ├── cmd/
// │   └── app/
// │       └── main.go
// ├── internal/
// │   ├── api/
// │   │   ├── router.go
// │   │   ├── handlers.go
// │   │   └── middleware.go
// │   ├── service/
// │   │   └── user_service.go
// │   ├── repository/
// │   │   ├── mysql/
// │   │   │   └── user_repository.go
// │   │   └── redis/
// │   │       └── user_cache.go
// │   ├── models/
// │   │   └── user.go
// │   └── config/
// │       └── config.go
// ├── pkg/
// │   ├── mysql/
// │   │   └── mysql.go
// │   └── redis/
// │       └── redis.go
// └── go.mod

Структура проекта

cmd/app/main.go - точка входа в приложение
internal/ - внутренние пакеты приложения

api/ - обработчики HTTP-запросов, роутер и middleware
service/ - бизнес-логика
repository/ - слой доступа к данным (MySQL и Redis)
models/ - модели данных
config/ - конфигурация приложения


pkg/ - переиспользуемые пакеты

Основные особенности

Уровни абстракции:

API слой (роутер, хендлеры, middleware)
Сервисный слой (бизнес-логика)
Репозитории (доступ к данным)
Инфраструктура (подключения к БД)


Кеширование:

Реализована двухуровневая стратегия (сначала проверка в Redis, затем MySQL)
Фоновое обновление кеша по тикеру


Graceful shutdown:

Корректное завершение HTTP-сервера
Остановка фоновых горутин
Закрытие соединений с БД


Роутинг:

RESTful API с использованием Gorilla Mux
Обработка эндпоинтов для CRUD-операций с пользователями
Логирование запросов



Для использования этого примера нужно только добавить файл конфигурации config.json и настроить соединения с базами данных. Сервис готов к дальнейшему расширению и масштабированию.